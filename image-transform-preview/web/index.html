<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Image Transform Preview</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üñºÔ∏è Image Transform Preview</h1>
            <p>Ë§áÊï∞ÁîªÂÉè„ÅÆ„Ç¢„Éï„Ç£„É≥Â§âÊèõ„ÉªÂêàÊàê„Éó„É¨„Éì„É•„Éº</p>
            <div id="version-info" class="version-info"></div>
        </header>

        <div class="main-content">
            <!-- Â∑¶ÂÅ¥: „Éó„É¨„Éì„É•„Éº„Ç®„É™„Ç¢ -->
            <div class="preview-section">
                <div class="canvas-container">
                    <canvas id="preview-canvas"></canvas>
                </div>
                <div class="canvas-controls">
                    <label>
                        „Ç≠„É£„É≥„Éê„Çπ„Çµ„Ç§„Ç∫:
                        <input type="number" id="canvas-width" value="800" min="100" max="2000">
                        √ó
                        <input type="number" id="canvas-height" value="600" min="100" max="2000">
                        <button id="resize-canvas">„Çµ„Ç§„Ç∫Â§âÊõ¥</button>
                    </label>
                </div>
                <div class="output-controls">
                    <button id="download-btn" class="primary-btn">üì• ÂêàÊàêÁîªÂÉè„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                </div>
            </div>

            <!-- Âè≥ÂÅ¥: „É¨„Ç§„É§„ÉºÁÆ°ÁêÜ„Ç®„É™„Ç¢ -->
            <div class="layers-section">
                <div class="section-header">
                    <h2>„É¨„Ç§„É§„Éº</h2>
                    <button id="add-image-btn" class="primary-btn">+ ÁîªÂÉèËøΩÂä†</button>
                    <input type="file" id="image-input" accept="image/*" style="display:none;" multiple>
                </div>

                <div id="layers-list"></div>
            </div>
        </div>
    </div>

    <!-- „É¨„Ç§„É§„Éº„ÉÜ„É≥„Éó„É¨„Éº„Éà -->
    <template id="layer-template">
        <div class="layer-item">
            <div class="layer-header">
                <input type="checkbox" class="layer-visibility" checked>
                <span class="layer-title">Layer</span>
                <div class="layer-actions">
                    <button class="layer-up" title="‰∏ä„Å∏">‚Üë</button>
                    <button class="layer-down" title="‰∏ã„Å∏">‚Üì</button>
                    <button class="layer-delete" title="ÂâäÈô§">√ó</button>
                </div>
            </div>
            <div class="layer-controls">
                <div class="control-group">
                    <label>
                        <span class="control-label">X‰ΩçÁΩÆ:</span>
                        <input type="range" class="param-translatex" min="-400" max="400" value="0" step="1">
                        <span class="param-value">0</span>
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-label">Y‰ΩçÁΩÆ:</span>
                        <input type="range" class="param-translatey" min="-300" max="300" value="0" step="1">
                        <span class="param-value">0</span>
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-label">ÂõûËª¢:</span>
                        <input type="range" class="param-rotation" min="0" max="360" value="0" step="1">
                        <span class="param-value">0¬∞</span>
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-label">„Çπ„Ç±„Éº„É´X:</span>
                        <input type="range" class="param-scalex" min="0.1" max="3.0" value="1.0" step="0.01">
                        <span class="param-value">1.00</span>
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-label">„Çπ„Ç±„Éº„É´Y:</span>
                        <input type="range" class="param-scaley" min="0.1" max="3.0" value="1.0" step="0.01">
                        <span class="param-value">1.00</span>
                    </label>
                </div>
                <div class="control-group">
                    <label>
                        <span class="control-label">ÈÄèÈÅéÂ∫¶:</span>
                        <input type="range" class="param-alpha" min="0" max="1" value="1.0" step="0.01">
                        <span class="param-value">100%</span>
                    </label>
                </div>

                <!-- „Éï„Ç£„É´„Çø„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="filters-section">
                    <div class="filters-header">
                        <span class="control-label">„Éï„Ç£„É´„Çø</span>
                        <div class="filter-add-buttons">
                            <button class="filter-add-btn" data-filter="grayscale" title="„Ç∞„É¨„Éº„Çπ„Ç±„Éº„É´">‚ö™</button>
                            <button class="filter-add-btn" data-filter="brightness" title="Êòé„Çã„Åï">‚òÄÔ∏è</button>
                            <button class="filter-add-btn" data-filter="blur" title="„Åº„Åã„Åó">üå´Ô∏è</button>
                        </div>
                    </div>
                    <div class="filters-list"></div>
                </div>

                <!-- „Éé„Éº„Éâ„Ç®„Éá„Ç£„Çø„Çª„ÇØ„Ç∑„Éß„É≥ -->
                <div class="node-editor-section">
                    <div class="node-editor-header">
                        <span class="control-label">„Éé„Éº„Éâ„Ç®„Éá„Ç£„Çø</span>
                        <button class="node-editor-toggle" title="Ë°®Á§∫/ÈùûË°®Á§∫">‚ñº</button>
                    </div>
                    <div class="node-editor-canvas-container">
                        <svg class="node-editor-canvas" width="100%" height="300">
                            <!-- „Éé„Éº„Éâ„Å®Êé•Á∂öÁ∑ö„Åå„Åì„Åì„Å´ÊèèÁîª„Åï„Çå„Çã -->
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>WebAssemblyË™≠„ÅøËæº„Åø‰∏≠...</p>
    </div>

    <!-- Build version information -->
    <script src="version.js"></script>
    <!-- WebAssembly module (must load before app.js so Module is defined) -->
    <script src="image_transform.js"></script>
    <!-- Application logic (initializes Module after it's loaded) -->
    <script src="app.js"></script>
</body>
</html>
