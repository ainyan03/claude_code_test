; PlatformIO Project Configuration File
; fleximg M5Stack Benchmark Example
;
; Build targets:
;   pio run -e native      # macOS native build (SDL window)
;   pio run -e m5stack_core2
;   pio run -e m5stack_cores3

[platformio]
default_envs = native

[env]
lib_deps =
    m5stack/M5Unified
build_flags =
    -DFLEXIMG_NAMESPACE=fleximg
    -DFLEXIMG_DEBUG
    -Wall
    -Wextra
    -I../../src

; =============================================================================
; Native (macOS/Linux/Windows with SDL)
; =============================================================================
[env:native]
platform = native
build_type = debug
build_flags =
    -O0 -xc++ -std=c++14 -lSDL2 -arch arm64
    -I"/usr/local/include/SDL2"
    -L"/usr/local/lib"
    -I"${sysenv.HOMEBREW_PREFIX}/include/SDL2"
    -L"${sysenv.HOMEBREW_PREFIX}/lib"
    -DFLEXIMG_NAMESPACE=fleximg
    -DFLEXIMG_DEBUG
    -I../../src
lib_deps =
    m5stack/M5Unified

; =============================================================================
; M5Stack Core2
; =============================================================================
[env:m5stack_core2]
platform = espressif32
board = m5stack-core2
framework = arduino
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
monitor_filters = esp32_exception_decoder
monitor_speed = 115200
build_flags =
    -Os
    ${env.build_flags}
    -std=gnu++17
    -DARDUINO_M5STACK_CORE2
    -DBOARD_HAS_PSRAM=0
build_unflags =
    -std=gnu++11
    -DBOARD_HAS_PSRAM
lib_deps =
    ${env.lib_deps}

; =============================================================================
; M5Stack CoreS3
; =============================================================================
[env:m5stack_cores3]
platform = espressif32
board = m5stack-cores3
framework = arduino
board_build.f_cpu = 240000000L
board_build.f_flash = 80000000L
board_build.flash_mode = qio
monitor_filters = esp32_exception_decoder
monitor_speed = 115200
build_flags =
    -Os
    ${env.build_flags}
    -std=gnu++17
    -DARDUINO_M5STACK_CORES3
    -DBOARD_HAS_PSRAM=0
build_unflags =
    -std=gnu++11
    -DBOARD_HAS_PSRAM
lib_deps =
    ${env.lib_deps}
